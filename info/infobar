#!/bin/bash

#f=▓;e=░
f=━
e=━

kernel=`uname -r`
bn=`cat /sys/class/power_supply/BAT0/charge_now`
bf=`cat /sys/class/power_supply/BAT0/charge_full`

bar () {
  perc=$1;size=$2
  inc=$(( perc * size / 100 ))
  out=
  for v in `seq 0 $(( size - 1 ))`;do
  test "$v" -le "$inc" && out="${out}\e[1;37m${f}" || out="${out}\e[0;36m${e}"
  done;printf $out
}
#clear && printf "\e[3J\n"

cpu=`mpstat -u | awk '/all/' | cut -b 20-24`
c_lvl=`printf "%.0f" $cpu`

ram=`free | awk '/Mem:/ {print int($3/$2 * 100.0)}'`

spc=`df -h | awk '/dev\/mmcblk0p2/' | cut -b 35-36`

chrg=`printf $(( 100 * $bn / $bf ))`

temp=`sensors | awk '/Core\ 0/ {gsub(/\+/,"",$3); gsub(/\..+/,"",$3)    ; print $3}'`

printf "   \e[0;36m%-4s \e[1;36m%-5s %-25s " " cpu" "$c_lvl%" `bar $c_lvl 15`
printf "   \e[0;36m%-4s \e[1;36m%-5s %-25s " " ram" "$ram%" `bar $ram 15`
printf "   \e[0;36m%-4s \e[1;36m%-5s %-25s " " /" `bar $spc 15`
printf "   \e[0;36m%-4s \e[1;36m%-5s %-25s " " bat" "$chrg%" `bar $chrg 15`
printf "   \e[0;36m%-4s \e[1;36m%-5s %-25s \n" "$temp°c " `bar $temp 15`

